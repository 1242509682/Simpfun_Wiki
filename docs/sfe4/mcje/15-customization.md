---
title:“自定义”选项开服
---

:::tip

本文档将介绍如何使用“自定义”预设从头进行Minecraft服务器开服。如果你想将SFE3.1的服务器迁移到SFE4，详见[从 SFE3 迁移到 SFE4](https://www.simpfun.me/docs/%E4%BB%8E%20SFE3%20%E8%BF%81%E7%A7%BB%E5%88%B0%20SFE4)。

注意：本文档默认 **`你已经有预设开服的基础和管理服务器的部分经验（包括但不限于mod服、插件服等）`**。关于此类知识，请参阅[服务器文件结构]()（←这个文档还没写）等多个文档，或者你也可以把所有文档都看一遍。

注1：如果你没有以上所说的开服经验并且在阅读本文档时遇到障碍，大概率你的需求与自定义预设开服不匹配，请自行[重装](https://www.simpfun.me/docs/%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B/%E5%AE%9E%E4%BE%8B%E7%AE%A1%E7%90%86/%E9%87%8D%E8%A3%85)到预设然后按照正常开服流程进行开服。

注2：本文档部分引用[官方文档](https://www.simpfun.me/)。

:::

-----

## 导入自己的服务端

在创建完毕自定义实例后，文件管理下仅有`start.sh`一个文件，此文件为服务器启动所使用的启动脚本，可以调整服务器启动参数。现在暂时不管它。

向服务器文件管理上传你自己的服务端文件。

确定服务器核心已上传后，**记住文件名（包括后缀名!）**。

:::tip

如果你忘了怎么上传……建议还是不要自定义开服。如果有刚需必须自定义的话，请看[文件](https://www.simpfun.me/docs/%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B/%E5%AE%9E%E4%BE%8B%E7%AE%A1%E7%90%86/%E6%96%87%E4%BB%B6)。

:::

在你确认执行此步骤的每一步都没有错误后，进入下一步。

## 配置`start.sh`文件

### 配置服务器启动命令

`start.sh`文件默认内容如下：

```sh
#!/bin/bash

#启动变量说明，修改前务必查看
#https://www.yuque.com/simpfun/sfe/startup

openjdk8="/usr/bin/jdk/jdk1.8.0_361/bin/java"
openjdk11="/usr/bin/jdk/jdk-11.0.18/bin/java"
openjdk17="/usr/bin/jdk/jdk-17.0.6/bin/java"
openjdk19="/usr/bin/jdk/jdk-19.0.2/bin/java"

maxmem=$((SERVER_MEMORY - 1000))

echo "您需要修改start.sh文件来配置您的启动参数"
```

:::tip

请注意：在`start.sh`文件中，如果行首有`#`符号则整行视为注释，运行时自动忽略。

:::

以下是一段启动命令示例：

```sh
${openjdk17} -Xms1024M -Xmx${maxmem}M -jar server-release.jar
```

:::info

关于各项参数的说明：

`{openjdk17}`：调用变量`openjdk17`。这个变量在上面的默认内容里被定义过了。

`-Xms1024M`：服务器运行最小内存为1024Mib。你可以更改`1024M`这个值：如果觉得最小运存太大可以改为`512M`或其他值，只要数字部分是4的倍数；如果强迫症不想使用M作为单位，可以改为`1G`，效果同样。

`Xmx${maxmem}M`：服务器运行最大内存为maxmxm M。maxmxm是上文定义的变量，为服务器最大物理内存-1000（单位M）。如果不想要这个~~烦人的~~变量名可以把`${maxmem}`整个改成数字，让它变得和`Xmx`这一项看起来一样。**注：`Xmx`与`Xms`均不要设为超出实例运行内存上限的值，也不要设反了让最大值比最小值小，会导致服务器无法启动！**

`-jar`：告诉Java你要启动jar文件。此项不要调整。

`server-release.jar`：服务器核心名称，**改成自己的，包括刚才让你记的后缀名！！**

:::

如果以此命令启动服务器，则会调用`openjdk17`即Java17为运行游戏的Java，服务器运行内存范围为`1024M~（最大物理内存-1000）M`。

### 删除原本的提示

当你确认服务器启动命令配置完成后，记得删除代码中的此行：

```sh
echo "您需要修改start.sh文件来配置您的启动参数"
```

此行代码的作用是向控制台输出“您需要修改start.sh文件来配置您的启动参数”这句话，~~用来把你引到这里来看文档~~告诉你需要配置`start.sh`文件。既然已经配置成功，则不需要这句话（即使它对服务器运行不会造成任何影响，也可能造成你的误判——认为`start.sh`文件需要配置从而浪费时间。

所以建议把这行提示删去，或者~~如果你不想太残忍（？）~~可以在行首加上`#`从而使这行代码变为注释，服务器启动时不会输出提示。
